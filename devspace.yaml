version: v1beta11

images:
  k8s-dev-demo: 
    image: c8n.io/myspotontheweb/k8s-dev-demo
    build:
      buildKit: {}

vars:
- name: INGRESS_IP
  question: "Please specify IP address of the ingress controller"
  default: 10.10.10.10 

deployments:
- name: k8s-dev-demo
  helm:
    componentChart: true
    templateArgs:
    - "--api-versions=networking.k8s.io/v1/Ingress"
    values:
      containers:
      - image: image(k8s-dev-demo):tag(k8s-dev-demo) 
      service:
        ports:
        - port: 8080
      ingress:
        ingressClassName: nginx
        tls: false
        rules:
        - host: k8s-dev-demo.${INGRESS_IP}.nip.io
          path: "/"
          pathType: "Prefix"

